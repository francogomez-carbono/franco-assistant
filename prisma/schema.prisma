generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// --- JUEGO Y ESTAD√çSTICAS (POR PILAR) ---
model UserStats {
  id        Int @id @default(autoincrement())
  
  // PLATA
  xpPlata    Int @default(0)
  lvlPlata   Int @default(1)
  
  // PENSAR
  xpPensar   Int @default(0)
  lvlPensar  Int @default(1)
  
  // FISICO
  xpFisico   Int @default(0)
  lvlFisico  Int @default(1)
  
  // SOCIAL
  xpSocial   Int @default(0)
  lvlSocial  Int @default(1)
}

// --- LOS DE SIEMPRE ---
model Rutina {
  id          Int      @id @default(autoincrement())
  bloque      String   
  pilar       Pilar
  horaInicio  String   
  dias        Int[]    
  activo      Boolean  @default(true)
}

model LogEstado {
  id            Int      @id @default(autoincrement())
  timestamp     DateTime @default(now())
  energia       Int?     
  concentracion Int?     
  inputUsuario  String?  
  notasIA       String?  
  xpGanada      Int      @default(0) // <--- NUEVO
}

model LogCiclo {
  id          Int       @id @default(autoincrement())
  tarea       String
  pilar       Pilar
  inicio      DateTime  @default(now())
  fin         DateTime?
  estado      EstadoCiclo @default(EN_PROGRESO)
  resultado   String?
  xpGanada    Int       @default(0) // <--- NUEVO
}

model LogHabito {
  id          Int      @id @default(autoincrement())
  nombre      String
  timestamp   DateTime @default(now())
  estado      EstadoHabito
  snoozeCount Int      @default(0)
  xpGanada    Int      @default(0) // <--- NUEVO
}

model LogConsumo {
  id          Int      @id @default(autoincrement())
  timestamp   DateTime @default(now())
  tipo        TipoConsumo
  descripcion String
  cantidad    Float?   
  xpGanada    Int      @default(0) // <--- NUEVO
}

model LogIdea {
  id        Int      @id @default(autoincrement())
  timestamp DateTime @default(now())
  idea      String
  tags      String?
  xpGanada  Int      @default(0) // <--- NUEVO
}

model LogSocial {
  id          Int      @id @default(autoincrement())
  timestamp   DateTime @default(now())
  tipo        String
  duracion    Int?
  valoracion  Int?
  xpGanada    Int      @default(0) // <--- NUEVO
}

// --- ENUMS ---
enum Pilar {
  PLATA
  PENSAR
  FISICO
  SOCIAL
}

enum EstadoCiclo {
  EN_PROGRESO
  COMPLETADO
  BURNOUT
  INTERRUMPIDO
}

enum EstadoHabito {
  HECHO
  POSPUESTO
  SKIPPED
}

enum TipoConsumo {
  COMIDA
  LIQUIDO
  AYUNO
  SUENO
}